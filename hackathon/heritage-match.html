<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Heritage Matching Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    :root{
      --primary: #4a148c;
      --secondary: #ff6f00;
      --accent: #1de9b6;
      --dark: #1a237e;
      --glass-bg: rgba(255,255,255,0.06);
      --glass-border: rgba(255,255,255,0.08);
      --bg: radial-gradient(circle at top,#0b0220,#000511);
    }

    *{box-sizing:border-box}
    body{font-family:'Poppins',system-ui,sans-serif;margin:0;min-height:100vh;background:var(--bg);color:#fff;padding:2rem;}

    header{ text-align:center; margin-bottom:1rem }
    h1{ margin:0 0 .4rem; background:linear-gradient(45deg,var(--accent),var(--secondary)); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent }
    .score{ color:var(--secondary) }

    .game{ width:100%; max-width:980px; margin:0 auto }
    .glass{ background:var(--glass-bg); border:1px solid var(--glass-border); border-radius:12px; padding:1.5rem; backdrop-filter: blur(12px); box-shadow:0 10px 30px rgba(0,0,0,0.35) }

    .grid{ display:grid; grid-template-columns: repeat(4,1fr); gap:1rem; margin:1.5rem 0 }
    .card{ aspect-ratio:3/4; background:rgba(255,255,255,0.03); border-radius:10px; cursor:pointer; display:flex;align-items:center;justify-content:center;padding:1rem; position:relative; transform-style:preserve-3d; transition:transform .6s }
    .card.flipped{ transform: rotateY(180deg) }
    .card .front, .card .back{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; border-radius:10px; backface-visibility:hidden; padding:.6rem }
    .card .front{ background: linear-gradient(45deg,var(--primary),var(--dark)); color:#fff }
    .card .back{ background: rgba(255,255,255,0.06); transform: rotateY(180deg); color:#fff }
    .card.matched{ background: linear-gradient(135deg,var(--secondary),var(--primary)); cursor:default }

    .controls{ text-align:center; margin-top:1.5rem }
    .btn{ padding:.8rem 1.2rem; border-radius:10px; border:0; cursor:pointer; background:linear-gradient(45deg,var(--primary),var(--dark)); color:#fff; font-weight:600; margin:0 .4rem }
    .btn.outline{ background:transparent; border:1px solid rgba(255,255,255,0.08); color:#fff }

    @media (max-width:768px){ .grid{ grid-template-columns: repeat(2,1fr) } }
  </style>
</head>
<body>
  <main class="game glass">
    <div class="header">
      <h1>Heritage Matching</h1>
      <p>Match each monument with its fact! <span class="score">Score: <span id="score">0</span></span></p>
    </div>

    <div class="grid" id="grid"></div>

    <div class="controls">
      <button class="btn" id="start">New Game</button>
      <button class="btn outline" onclick="location.href='Hub.html'">Back to Game Bar</button>
      <button class="btn outline" onclick="location.href='index.html'">Back to Home</button>
    </div>
  </main>

  <script>
    const monuments = [
      { name: "Taj Mahal", fact: "Built between 1632-1653 as a symbol of eternal love" },
      { name: "Red Fort", fact: "Served as the main residence of Mughal Emperors for nearly 200 years" },
      { name: "India Gate", fact: "War memorial dedicated to soldiers who died in World War I" },
      { name: "Qutub Minar", fact: "UNESCO site built in early 13th century, reaching 73 meters tall" },
      { name: "Hawa Mahal", fact: "Palace in Jaipur with 953 windows for royal women to observe street life" },
      { name: "Konark Sun Temple", fact: "13th century temple designed as a giant chariot with 12 pairs of wheels" }
    ];

    let firstCard = null;
    let secondCard = null;
    let canFlip = true;
    let score = 0;
    let matches = 0;

    function createCard(content, type) {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <div class="front">?</div>
        <div class="back">${content}</div>
      `;
      card.dataset.value = content;
      card.dataset.type = type;
      card.addEventListener('click', flipCard);
      return card;
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function setupGame() {
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      score = 0;
      matches = 0;
      document.getElementById('score').textContent = score;

      const pairs = [];
      monuments.forEach(m => {
        pairs.push(
          { content: m.name, type: 'name', match: m.fact },
          { content: m.fact, type: 'fact', match: m.name }
        );
      });

      shuffle(pairs).forEach(pair => {
        grid.appendChild(createCard(pair.content, pair.type));
      });
    }

    function flipCard() {
      if (!canFlip || this.classList.contains('flipped') || this.classList.contains('matched')) return;

      this.classList.add('flipped');

      if (!firstCard) {
        firstCard = this;
        return;
      }

      secondCard = this;
      canFlip = false;
      checkMatch();
    }

    function checkMatch() {
      const isMatch = (
        (firstCard.dataset.type === 'name' && secondCard.dataset.type === 'fact' && 
         monuments.find(m => m.name === firstCard.dataset.value)?.fact === secondCard.dataset.value) ||
        (firstCard.dataset.type === 'fact' && secondCard.dataset.type === 'name' &&
         monuments.find(m => m.fact === firstCard.dataset.value)?.name === secondCard.dataset.value)
      );

      if (isMatch) {
        firstCard.classList.add('matched');
        secondCard.classList.add('matched');
        score += 10;
        matches++;
        if (matches === monuments.length) {
          setTimeout(() => alert(`Congratulations! You completed the game with ${score} points!`), 500);
        }
      } else {
        score = Math.max(0, score - 2);
        setTimeout(() => {
          firstCard.classList.remove('flipped');
          secondCard.classList.remove('flipped');
        }, 1000);
      }

      document.getElementById('score').textContent = score;
      setTimeout(() => {
        firstCard = null;
        secondCard = null;
        canFlip = true;
      }, 1000);
    }

    document.getElementById('start').addEventListener('click', setupGame);
    setupGame();
  </script>
</body>
</html>
